# 软硬结合做毕设——智慧宿舍管理系统

## 软件部分

### 技术栈

* 前端框架：React18，styled-components，axios，Echarts
* 组件库：Ant Design 
* 构建工具： Webpack和Babel
* 状态管理器：Zustand
* 服务器框架：Koa2
* 数据库：MySql

### 系统功能分析

#### 登录功能

* 分为管理员登录和学生登录，两者拥有不同权限而显示不同的菜单，没有设计注册功能，管理员在用户管理界面中添加了学生的学号密码，学生才能登录。
* [x] 使用css渐变设计一个好看的登录界面背景
* [x] 设计登录界面
* [x] 设计登录接口
* [x] 做页面的表单验证
* [x] 学习zustand状态管理器
* [x] 记住密码功能
* [x] 实现路由拦截，没有token被拦截回登录页面
* [x] 实现了权限分配，根据登录的角色不同展示不同菜单
* [x] 登录账号时如果账号已经存在在注册页面显示后端返回的信息

#### 用户管理

* 可以进行对用户增删改查，分配宿舍，分配床位，添加时间，更新时间等
* [x] 设计用户注册接口
* [x] 设计用户删除接口
* [x] 设计用户修改接口
* [x] 设计用户查询接口
* [x] 设计列表查询接口
* [x] 完成主页面的布局
* [x] 完成菜单栏，并且联动面包屑
* [x] 完成用户管理页面增删改查
* [x] 注册账号时如果账号已经存在在注册页面显示后端返回的信息
* [x] 完成当token过期时跳出提示框重新登录
* [x] 完成无法删除初始管理员的功能

#### 个人中心

* 宿舍内学生的基本信息，包括姓名、性别、年级、联系方式等

* [x] 完成基础前端页面
* [x] 完成后端增删改查接口
* [x] 完成交互并实现有数据时隐藏边框和修改label的颜色
* [x] 点击个人信息跳转到个人中心
* [x] 上传头像
* [x] 修改密码

#### 监测控制

* 可以采集温湿度，人体有无数据实时显示在pc

* 可以定时开关宿舍供电
* 配置手动模式和自动模式
  * 手动模式：通过PC控制灯和风扇的开关	
  * 温度到达阈值并且有人的情况下自动开风扇

#### 报修管理

* 学生可以向宿管提交报修请求

* [x] 设计后端增删改查接口
* [x] 设计管理员才能操作修改状态
* [x] 完成前端页面以及增删改查功能

#### 宿舍公告和通知

* ​	发布和展示宿舍相关的公告和通知，比如维修通知、重要活动通知等。
* [x] 设计后端增删改查接口
  * [x] 完成前端页面以及增删改查功能

#### 数据统计

* 临时添加的页面，有显示最新公告，统计供电时段，统计用户类型，统计各栋人数，统计维修数量
* [x] 完成整个页面


#### bug

* [x] 修复在第二页点击编辑页面跳到第一页但页码不跳的bug

* [x] 修复在第二页删除最后一条数据后不加载第一页数据的bug

* [x] 修复在第二页无法查询的bug

* [x] 修复了定时供电的选择时间模态框第二次选择时上一次选择的时间还存在那里的bug

* [x] 修复了在未选择时间时点击确定还是会打开定时按钮的bug

* [ ] 修复了在定时之后点取消还是会把之前定的时间发到后端导致供电的bug

* [x] 修复了关闭自动调控时没有把风扇关闭的bug

* [x] 修复宿舍号和床号是唯一

* [x] 将定时供电的时间段用可视化表示出来

* [x] 根据路径动态映射出菜单和面包屑

* [ ] 编辑了用户的角色，只是修改了角色名，并没有修改角色权限

* [x] 修复了定时供电切到其他页面或者刷新后就取消的bug

* [x] 供电时间到午夜24点就刷新

  

  







## 硬件部分

* [x] 将温湿度，人体有无使用websocket实时显示在pc
* [x] 通过http服务远程控制灯泡
* [x] 远程控制风扇，只能控制继电器
* [x] 电源不够，等电池盒到了再解决
* [x] 定时供电
* [x] 自动调控，当有人且温度达到阈值时打开风扇
* [x] 当开启定时时显示定时时间，当定时结束时再把时间消失



